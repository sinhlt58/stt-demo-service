(this["webpackJsonpvoice-bot-web"]=this["webpackJsonpvoice-bot-web"]||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t);var c,a=n(1),o=n.n(a),i=n(28),r=n.n(i),s=(n(76),n(77),n(16)),u=n.n(s),l=n(34),d=n(12),f=n(127),b=n(65),j=n.n(b),O=n(66),h=n.n(O),v=n(40),p=n.n(v);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(c||(c={}));var m=n(63),g=n.n(m),w=null;var x=n(125),C=n(128),S=Object(x.a)((function(e){return Object(C.a)({root:{overflow:"scroll",height:"100vh"},micContainer:{},mic:{display:"block",cursor:"pointer",fontSize:80}})})),N=n(3),E=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(void 0),i=Object(d.a)(o,2),r=i[0],s=i[1],b=Object(a.useState)(void 0),O=Object(d.a)(b,2),m=O[0],x=O[1],C=Object(a.useState)(void 0),E=Object(d.a)(C,2),y=(E[0],E[1]),L=Object(a.useState)(""),k=Object(d.a)(L,2),T=k[0],R=k[1],I=S(),D=(w||(w=g()("ws://localhost:5000")),w);Object(a.useEffect)((function(){console.log("wtf")}),[]),Object(a.useEffect)((function(){}),[]),Object(a.useEffect)((function(){n||F()}),[n]);var F=function(){console.log("clean mic"),r&&r.stopRecording((function(){console.log("stoped");var e=r.getBlob(),t=new FileReader;t.readAsDataURL(e),t.onloadend=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.result)&&(n=n.split(",")[1]);case 2:case"end":return e.stop()}}),e)})));var n=URL.createObjectURL(e);console.log(n),y(n)})),m&&(console.log("remove local audio stream"),m.getAudioTracks().forEach((function(e){e.stop()})),m=void 0)};return Object(N.jsxs)(a.Fragment,{children:[Object(N.jsxs)("h2",{children:["STT text: ",T]}),Object(N.jsxs)(f.a,{width:"100%",height:"100vh",display:"flex",flexDirection:"column",className:I.root,children:[Object(N.jsx)(f.a,{width:"100%",height:"2%"}),Object(N.jsxs)(f.a,{width:"100%",height:"20%",display:"flex",justifyContent:"center",alignItems:"center",className:I.micContainer,children:[!n&&Object(N.jsx)(j.a,{className:I.mic,onClick:function(e){R(""),navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t),(n=new p.a(t,{type:"audio",mimeType:"audio/wav",recorderType:v.StereoAudioRecorder,disableLogs:!0,timeSlice:100,ondataavailable:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D&&D.emit("stt",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),desiredSampRate:16e3,bitrate:128e3,bitsPerSecond:128e3,numberOfAudioChannels:1})).startRecording(),s(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(!0)}}),n&&Object(N.jsx)(h.a,{className:I.mic,onClick:function(e){F(),c(!1)}})]})]})]})},y=n(126);var L=function(){return Object(N.jsx)(y.a,{maxWidth:"sm",children:Object(N.jsx)(E,{})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))};r.a.render(Object(N.jsx)(o.a.StrictMode,{children:Object(N.jsx)(L,{})}),document.getElementById("root")),k()},76:function(e,t,n){},77:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.b3493937.chunk.js.map