(this["webpackJsonpvoice-bot-web"]=this["webpackJsonpvoice-bot-web"]||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t);var c,o=n(1),i=n.n(o),a=n(28),r=n.n(a),s=(n(76),n(77),n(16)),u=n.n(s),l=n(34),d=n(12),b=n(127),O=n(65),f=n.n(O),_=n(66),j=n.n(_),v=n(40),h=n.n(v),p=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AD_B2C_CLIENT_ID:"e05e961e-8778-473e-bb37-6069e4277307",REACT_APP_AD_B2C_SCOPES:"https://vbint.onmicrosoft.com/api/vbmda.read",REACT_APP_AD_B2C_AUTHORITY:"https://vbint.b2clogin.com/vbint.onmicrosoft.com/",REACT_APP_AD_B2C_LOGIN_FLOW:"B2C_1_vbmda-signin-v2-int",REACT_APP_API_URL:"http://localhost:808",REACT_APP_VOICE_ASSISTANT_API_URL:"http://localhost:8000",REACT_APP_SPEECH_TO_TEXT_ENDPOINT:"wss://ca98-2405-4803-fe39-2730-973-d1ca-8bb4-b974.ngrok.io/nlp/audio?speech-provider=google"}).REACT_APP_STT_SOCKETIO_ENDPOINT,C=void 0===p?"":p;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(c||(c={}));var T=n(63),m=n.n(T),E=null;var S=n(125),A=n(128),P=Object(S.a)((function(e){return Object(A.a)({root:{overflow:"scroll",height:"100vh"},micContainer:{},mic:{display:"block",cursor:"pointer",fontSize:80}})})),g=n(3),N=function(){var e=Object(o.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)(void 0),a=Object(d.a)(i,2),r=a[0],s=a[1],O=Object(o.useState)(void 0),_=Object(d.a)(O,2),p=_[0],T=_[1],S=Object(o.useState)(void 0),A=Object(d.a)(S,2),N=(A[0],A[1]),R=Object(o.useState)(""),w=Object(d.a)(R,2),x=w[0],I=w[1],D=P(),L=(E||(E=m()(C)),E);Object(o.useEffect)((function(){console.log("wtf")}),[]),Object(o.useEffect)((function(){}),[]),Object(o.useEffect)((function(){n||k()}),[n]);var k=function(){console.log("clean mic"),r&&r.stopRecording((function(){console.log("stoped");var e=r.getBlob(),t=new FileReader;t.readAsDataURL(e),t.onloadend=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.result)&&(n=n.split(",")[1]);case 2:case"end":return e.stop()}}),e)})));var n=URL.createObjectURL(e);console.log(n),N(n)})),p&&(console.log("remove local audio stream"),p.getAudioTracks().forEach((function(e){e.stop()})),p=void 0)};return Object(g.jsxs)(o.Fragment,{children:[Object(g.jsxs)("h2",{children:["STT text: ",x]}),Object(g.jsxs)(b.a,{width:"100%",height:"100vh",display:"flex",flexDirection:"column",className:D.root,children:[Object(g.jsx)(b.a,{width:"100%",height:"2%"}),Object(g.jsxs)(b.a,{width:"100%",height:"20%",display:"flex",justifyContent:"center",alignItems:"center",className:D.micContainer,children:[!n&&Object(g.jsx)(f.a,{className:D.mic,onClick:function(e){I(""),navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t),(n=new h.a(t,{type:"audio",mimeType:"audio/wav",recorderType:v.StereoAudioRecorder,disableLogs:!0,timeSlice:100,ondataavailable:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L&&L.emit("stt",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),desiredSampRate:16e3,bitrate:128e3,bitsPerSecond:128e3,numberOfAudioChannels:1})).startRecording(),s(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(!0)}}),n&&Object(g.jsx)(j.a,{className:D.mic,onClick:function(e){k(),c(!1)}})]})]})]})},R=n(126);var w=function(){return Object(g.jsx)(R.a,{maxWidth:"sm",children:Object(g.jsx)(N,{})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),i(e),a(e)}))};r.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(w,{})}),document.getElementById("root")),x()},76:function(e,t,n){},77:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.5ed61e93.chunk.js.map